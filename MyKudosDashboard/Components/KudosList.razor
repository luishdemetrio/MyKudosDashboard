@using MyKudosDashboard.Models;

<div class="list-group list-group-checkable d-grid gap-1 border-0 " style="height:68.7vh;overflow-y:scroll">

    @foreach (var item in kudos)
    {

        <div class="profile" data-is-focusable="true">

            <div class="avatar">
                <img src=@($"data:image/png;base64,{item.To.Photo}") style="height:80px;width:80px;float:left;border-radius: 50%" />
            </div>

            <div class="info">

                <ul class="list-unstyled ">
                    <li>
                        <h5>@item.To.Name</h5>
                    </li>

                    <li>
                        <div class="text-wrap" style="width: 16rem;">
                            <spam class="card-title pricing-card-title">received a <spam style="font-weight: bold">@item.Title.ToUpper()</spam> kudos</spam>
                        </div>
                    </li>
                    <li>
                        <div>
                            <span style="margin-right:5px">Sent by</span>
                            <img src=@($"data:image/png;base64,{item.From.Photo}")
                             style="height: 26px;width: 26px;border-radius: 50%" />
                            <span style="margin-left:5px">@item.From.Name</span>
                        </div>

                    </li>
                </ul>
            </div>

            <div class="card-body" style="padding-left: 0px;padding-right: 0px;padding-top: 0px;padding-bottom: 0px;border-bottom: var(--bs-card-border-width) solid var(--bs-card-border-color);}">

                <div class="text-wrap" style="padding-left: 0px;padding-right: 0px;padding-top: 0px;padding-bottom: 0px;">
                    @item.Message
                </div>

                <div style="float:right">
                    <FluentButton style="margin-left:20px;">
                        <FluentIcon Name="@FluentIcons.CodeText" Slot="start" Size="@IconSize.Size16" Filled=false />
                        Read more
                    </FluentButton>

                    <FluentButton id="likes" style="margin-left:20px;" @onclick=Like>
                        <FluentIcon Name="@FluentIcons.Heart" Slot="start" Size="@IconSize.Size16" Filled=@_like />
                        @_numberOfLikes
                    </FluentButton>

                    <FluentTooltip Anchor="likes" Position=Microsoft.Fast.Components.FluentUI.TooltipPosition.Bottom>
                        <ul class="list-unstyled ">
                            <li>Monkey D Luffy</li>
                            <li>Roronoa Zoro</li>
                            <li>Nico Robin</li>
                        </ul>
                    </FluentTooltip>


                    <FluentButton style="margin-left:20px;">
                        <FluentIcon Name="@FluentIcons.Comment" Slot="start" Size="@IconSize.Size16" Filled=false />
                        1
                    </FluentButton>
                </div>


            </div>
        </div>


    }
</div>

@code {

    [Parameter]
    public IEnumerable<KudosResponse> kudos { get; set; } 

    private bool _like;
    private int _numberOfLikes = 3;

    private void Like()
    {
        _like = !_like;

        if (_like)
            _numberOfLikes++;
        else
            _numberOfLikes--;
    }

    

}
